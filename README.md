# TDD「镶金玫瑰商店」

## 业务背景

"镶金玫瑰"！这是一家魔兽世界里的小商店。出售的商品也都是高质量的。但不妙的是，随着商品逐渐接近保质期，它们的质量也不断下滑。我们用一个IT系统来更新库存信息。

首先，简单介绍一下我们的系统：

- 所有商品都有一个`SellIn`值，这是商品的保质期，最好在这么多天之内卖掉
- 所有商品都有一个`Quality`值，代表商品的价值
- 商品的`SellIn`值和`Quality`值，会随着天数的增加而变化，但是会有特例


商品的价格规则说明如下：

- 商品的价值永远不会小于0，也永远不会超过50
- 一旦过了保质期，`Quality`就以双倍的速度下滑
- 陈年干酪（`Aged Brie`）是一种特殊的商品，放得越久，价值反而越高
- 萨弗拉斯（`Sulfuras`）是一种传奇商品，没有保质期的概念，质量也不会下滑
- 后台门票（`Backstage pass`）和陈年干酪（`Aged Brie`）有相似之处：
	- 越接近演出日，随着`SellIn`值的增加，商品价值`Quality`值反而上升
	- 在演出前10天，价值每天上升2点
	- 演出前5天，价值每天上升3点
	- 一旦过了演出日，价值就马上变成0

## 业务分析
题目只描述了一些商品的属性和规约，并没有明确描述库存系统的实际业务目标，也没有明确系统要实现的功能。
为了简化题目，所以我们假设本系统是为了提供`查询所有商品的当前价值和库存量`的功能，以方便营业员指定进货和售卖计划。

## 建模
商品库存的模型如下：
- 名称：Good Name
- 数量：Amount（Amount>=0）
- 入库日期：Stored date
- 入库价值：Original Quality（0<Quality<=50）
- 入库时的保质期：SellIn（SellIn>0）
- 当前价值：Current Quality（0<Quality<=50）

库存管理系统提供几个最基本的方法
- 商品入库：stockIn()
- 查询所有库存商品并计算各商品的当前价值：listAll()
- 商品出库：stockOut()

对于商品的当前价值计算，我们采用策略模式将其是实现在不同商品价格计算的策略类中。
如此可以将商品与计算策略解耦合。
Good作为所有商品的父类。
	
## 子任务
- 实现商品库存应用
    - 实现入库功能
        - 实现库存模型
        - 实现库存模型的约束条件
        - 实现入库接口
        - 实现各子类的入库方法
    - 实现出库功能
        - 实现出库接口
    - 实现查询功能
        - 实现查询接口
        - 实现价值计算策略


## 疑问：
- 从哪里开始？domain or app? model or service?
- commit only test or test with implementation? 
Too many commits (sguash). 

